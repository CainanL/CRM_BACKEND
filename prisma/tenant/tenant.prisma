generator tenantClient {
  provider = "prisma-client-js"
  output   = "../../node_modules/.prisma/tenant-client"
}

datasource tenantDb {
  provider = "postgresql"
  url      = env("TENANT_DATABASE_URL")
}

model Solution {
  id          String                    @id @default(uuid())
  name        String                    @unique
  description String?
  priceRanger SolutionPriceRanger[]
  documents   SolutionDocumentCapture[]

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  fieldSettings SolutionFieldSettings[]

  @@map("solutions")
}

model SolutionPriceRanger {
  id                String   @id @default(uuid())
  title             String
  description       String?
  price             Decimal? @tenantDb.Decimal(10, 2)
  ranger            Decimal? @tenantDb.Decimal(10, 2)
  unitOfMeasurement String?

  solutionId String
  solution   Solution @relation(fields: [solutionId], references: [id])

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("solution_price_rangers")
}

model SolutionFieldSettings {
  id          String  @id @default(uuid())
  dataType    String
  formatType  String
  mask        String?
  title       String
  placeholder String?

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  solutionId String 
  solution Solution @relation(fields: [solutionId], references: [id])

  @@map("solution_field_settings")
}

model SolutionFieldValue {
  id    String  @id @default(uuid())
  value String?

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  documentsCapture SolutionDocumentCapture[]

  @@map("solution_field_values")
}

model SolutionDocumentCapture {
  id String @id @default(uuid())

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  fielValueId String
  fielValue   SolutionFieldValue @relation(fields: [fielValueId], references: [id])

  solutionId String
  solution   Solution @relation(fields: [solutionId], references: [id])

  @@map("solution_document_captures")
}
